{"name":"Scala-renren","tagline":"一个基于scala的人人分析工具","body":"# scarenren\r\n\r\nscarenren是一个基于scala的人人分析工具\r\n\r\n## 构建\r\n\r\n项目使用sbt构建，构建环境为`jdk1.7 scala2.11 sbt 0.13.8`\r\n\r\n## 输出\r\n\r\n### 好友学校统计\r\n\r\n在生成的`Output-Data.txt`中\r\n\r\n### 好友关系图\r\n\r\n以JFrame的形式展示，并生成在`headless_simple.png`和`headless_simple.svg`中\r\n\r\n### 文本格式的好友关系\r\n\r\n在`network.txt`中，是语言无关的，可以基于该文本做很多事情。其格式为\r\n\r\n\t-Friend(uid, location, name, url)  // 1\r\n\t--Friend(uid, location, name, url) // 2\r\n\t--Friend(uid, location, name, url) // 3\r\n\t...\r\n\t-Friend(uid, location, name, url)  // 2\r\n\t--Friend(uid, location, name, url) // 5\r\n\r\n其中-代表是节点，--代表由之前-节点指向该--节点的边。比如在此例中，行1为一个节点，行2代表一个由行1节点指向行2节点的一条边。\r\n\r\nPS：存储方式略显拙计。\r\n\r\n## 使用\r\n\r\n首先，新建`userinfo.ini`文件，内容与`userinfo.ini.example`内类似，用于爬取。\r\n\r\n然后，编译并运行需要指令`sbt run`，代码只在os x环境下使用过，不知道其他系统会不会有问题，第一次编译可能需要时间比较长，需要下载各种库，之后会快很多。\r\n\r\nPS: gephi在导出的时候，会有报错，形如\r\n\t\r\n\tjava.lang.InterruptedException: sleep interrupted\r\n\t\tat java.lang.Thread.sleep(Native Method)\r\n\t\tat org.gephi.data.attributes.event.AttributeEventManager.run(AttributeEventManager.java:87)\r\n\t\tat java.lang.Thread.run(Thread.java:745)\r\n\tjava.lang.InterruptedException\r\n\t\tat java.lang.Object.wait(Native Method)\r\n\t\tat java.lang.Object.wait(Object.java:503)\r\n\t\tat org.gephi.graph.dhns.core.GraphStructure$ViewDestructorThread.run(GraphStructure.java:240)\r\n\r\n但是对结果没有影响，run的结果还会是success。这些异常似乎catch不住，有待解决。\r\n\r\n## 代码阅读指南（程序执行指南）\r\n\r\n程序最主要的类是在renren.scala中，首先程序会读取在`userinfo.ini`中的用户名密码，然后取得用户的好友列表，最后根据好友列表，生成好友关系图。样例如下，原本是带有名字标签在图上的，但为了保护隐私，已和谐。\r\n\r\n<figure>\r\n\t<img src=\"http://gaocegege.com/scala-renren/example.png\" height=\"450\">\r\n</figure>\r\n\r\n另外在画图的时候使用了gephi-toolkit，现行的情况是，根据[Modularity](https://en.wikipedia.org/wiki/Modularity_\\(networks\\))来决定节点的颜色，节点度来决定节点的大小。\r\n\r\n## 未完成\r\n\r\n* 优化friendnetwork.scala中的marshal，不需要读入文件时都存入内存，边读入边遍历，可使用解释器模式\r\n* grapher.scala优化画图风格\r\n* actor使用到了外部mutable的变量，会有未定义的行为，以后改善。。。\r\n\r\n### PS\r\n\r\nCode Style在现在看来极其差劲。。。大家将就着看看吧。。\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}